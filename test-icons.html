<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>图标测试页面</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
  <link rel="stylesheet" href="fonts/material-symbols-rounded.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .test-section {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .icon-test {
      display: inline-flex;
      align-items: center;
      margin: 10px;
      padding: 10px;
      background: #f0f0f0;
      border-radius: 4px;
    }
    .icon-test span {
      margin-right: 8px;
    }
    .status {
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
    }
    .status.online { background: #d4edda; color: #155724; }
    .status.offline { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>
  <h1>图标系统测试</h1>
  
  <div class="test-section">
    <h2>字体加载状态</h2>
    <div id="font-status" class="status">检测中...</div>
    <button onclick="testFontLoad()">重新检测</button>
    <button onclick="simulateOffline()">模拟离线</button>
  </div>

  <div class="test-section">
    <h2>图标显示测试</h2>
    <div class="icon-test">
      <span class="material-symbols-rounded">search</span>
      <span>搜索图标</span>
    </div>
    <div class="icon-test">
      <span class="material-symbols-rounded">palette</span>
      <span>调色板图标</span>
    </div>
    <div class="icon-test">
      <span class="material-symbols-rounded">grid_view</span>
      <span>网格视图图标</span>
    </div>
    <div class="icon-test">
      <span class="material-symbols-rounded">view_list</span>
      <span>列表视图图标</span>
    </div>
    <div class="icon-test">
      <span class="material-symbols-rounded">add</span>
      <span>添加图标</span>
    </div>
  </div>

  <script src="js/icons.js"></script>
  <script>
    function testFontLoad() {
      const status = document.getElementById('font-status');
      const isLoaded = iconManager.isMaterialIconsLoaded();
      
      if (isLoaded) {
        status.textContent = '✅ Material Symbols 字体已加载';
        status.className = 'status online';
      } else {
        status.textContent = '❌ Material Symbols 字体未加载，使用备选方案';
        status.className = 'status offline';
      }
    }

    function simulateOffline() {
      // 移除在线字体链接，模拟离线状态
      const fontLink = document.querySelector('link[href*="fonts.googleapis.com"]');
      if (fontLink) {
        fontLink.remove();
        setTimeout(() => {
          iconManager.replaceMaterialIcons();
          testFontLoad();
        }, 100);
      }
    }

    // 初始化
    document.addEventListener('DOMContentLoaded', () => {
      iconManager.init();
      setTimeout(testFontLoad, 500);
    });
  </script>
</body>
</html>
