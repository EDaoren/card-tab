<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>本地字体测试</title>
    <link rel="stylesheet" href="fonts/material-symbols-rounded.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .icon-test {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin: 10px;
            padding: 10px;
            background: white;
            border-radius: 6px;
            border: 1px solid #eee;
        }
        
        .material-symbols-rounded {
            font-size: 24px;
            color: #4285f4;
        }
        
        .status {
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: 500;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.warning {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .font-info {
            background: white;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>🧪 Material Symbols 本地字体测试</h1>
    
    <div id="status" class="status">正在检测字体...</div>
    
    <div class="test-section">
        <h2>📋 字体加载信息</h2>
        <div id="font-info" class="font-info">
            <div>正在检测字体加载状态...</div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>🎯 图标显示测试</h2>
        <p>以下是项目中使用的主要图标：</p>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">search</span>
            <span>search - 搜索</span>
        </div>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">palette</span>
            <span>palette - 调色板</span>
        </div>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">grid_view</span>
            <span>grid_view - 网格视图</span>
        </div>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">view_list</span>
            <span>view_list - 列表视图</span>
        </div>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">add</span>
            <span>add - 添加</span>
        </div>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">sync</span>
            <span>sync - 同步</span>
        </div>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">download</span>
            <span>download - 下载</span>
        </div>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">expand_more</span>
            <span>expand_more - 展开</span>
        </div>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">cloud_upload</span>
            <span>cloud_upload - 云上传</span>
        </div>
        
        <div class="icon-test">
            <span class="material-symbols-rounded">settings</span>
            <span>settings - 设置</span>
        </div>
    </div>
    
    <div class="test-section">
        <h2>📊 性能对比</h2>
        <div id="performance-info">
            <p><strong>本地字体优势：</strong></p>
            <ul>
                <li>✅ 无需外部网络请求</li>
                <li>✅ 加载速度更快</li>
                <li>✅ 离线环境可用</li>
                <li>✅ 减少DNS查询</li>
                <li>✅ 避免CORS问题</li>
            </ul>
        </div>
    </div>

    <script>
        // 字体检测和状态显示
        function updateStatus(message, type = 'success') {
            const statusEl = document.getElementById('status');
            statusEl.textContent = message;
            statusEl.className = `status ${type}`;
        }
        
        function updateFontInfo(info) {
            const fontInfoEl = document.getElementById('font-info');
            fontInfoEl.innerHTML = info;
        }
        
        // 检测字体是否加载成功
        function checkFontLoading() {
            if ('fonts' in document) {
                document.fonts.ready.then(() => {
                    // 创建测试元素
                    const testElement = document.createElement('span');
                    testElement.className = 'material-symbols-rounded';
                    testElement.textContent = 'search';
                    testElement.style.position = 'absolute';
                    testElement.style.visibility = 'hidden';
                    testElement.style.fontSize = '24px';
                    document.body.appendChild(testElement);
                    
                    // 获取计算样式
                    const computedStyle = window.getComputedStyle(testElement);
                    const fontFamily = computedStyle.fontFamily;
                    const fontSize = computedStyle.fontSize;
                    
                    // 测量字符宽度
                    const rect = testElement.getBoundingClientRect();
                    const width = rect.width;
                    const height = rect.height;
                    
                    document.body.removeChild(testElement);
                    
                    // 显示字体信息
                    const fontInfo = `
                        <div><strong>字体族:</strong> ${fontFamily}</div>
                        <div><strong>字体大小:</strong> ${fontSize}</div>
                        <div><strong>图标尺寸:</strong> ${width.toFixed(1)}×${height.toFixed(1)}px</div>
                        <div><strong>检测时间:</strong> ${new Date().toLocaleTimeString()}</div>
                    `;
                    updateFontInfo(fontInfo);
                    
                    // 判断字体是否正常加载
                    const hasMaterialFont = fontFamily.includes('Material Symbols Rounded');
                    const hasReasonableSize = width > 10 && width < 50;
                    
                    if (hasMaterialFont && hasReasonableSize) {
                        updateStatus('✅ Material Symbols 本地字体加载成功！', 'success');
                        console.log('✅ 字体检测通过 - 本地字体工作正常');
                    } else {
                        updateStatus('⚠️ 字体可能未正常加载，请检查文件路径', 'warning');
                        console.log('⚠️ 字体检测失败 - 可能需要检查文件');
                    }
                });
            } else {
                updateStatus('❌ 浏览器不支持字体检测API', 'error');
            }
        }
        
        // 页面加载完成后检测字体
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkFontLoading, 100);
        });
        
        // 监听字体加载事件
        if ('fonts' in document) {
            document.fonts.addEventListener('loadingdone', () => {
                console.log('📝 字体加载完成事件触发');
            });
            
            document.fonts.addEventListener('loadingerror', () => {
                console.log('❌ 字体加载错误事件触发');
                updateStatus('❌ 字体加载失败', 'error');
            });
        }
    </script>
</body>
</html>
